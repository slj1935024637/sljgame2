(()=>{"use strict";var t={6578:(t,e,i)=>{i(3792),i(3362),i(9085),i(9391);var a=i(5130),s=i(6768),h=i(144),n=i(3180),r=i(5026),o=i(9492),l=(i(1629),i(4114),i(4554),i(6099),i(8992),i(3949),i(3500),i(9089),i(2953),function(){function t(e,i,a){(0,r.A)(this,t),this.game=a,this.x=e,this.y=i,this.width=30,this.height=50,this.velocityX=0,this.velocityY=0,this.speed=5,this.jumpForce=15,this.gravity=.5,this.health=100,this.isJumping=!1,this.isGrounded=!1,this.keys={left:!1,right:!1,up:!1,space:!1,a:!1},this.attackDamage=25,this.attackRange=60,this.attackDuration=300,this.attackCooldown=500,this.lastAttackTime=0,this.isAttacking=!1,this.projectileDamage=15,this.projectileSpeed=15,this.shootCooldown=800,this.lastShootTime=0,this.lastDirection=1,this.color="#4CAF50"}return(0,o.A)(t,[{key:"handleKeyDown",value:function(t){switch(t.key.toLowerCase()){case"arrowleft":case"a":this.keys.left=!0;break;case"arrowright":case"d":this.keys.right=!0;break;case"arrowup":case"w":case" ":!this.keys.up&&this.isGrounded&&(this.keys.up=!0,this.jump());break;case"j":this.meleeAttack();break;case"k":this.rangedAttack();break}}},{key:"handleKeyUp",value:function(t){switch(t.key.toLowerCase()){case"arrowleft":case"a":this.keys.left=!1;break;case"arrowright":case"d":this.keys.right=!1;break;case"arrowup":case"w":case" ":this.keys.up=!1;break}}},{key:"update",value:function(t){this.velocityX=0,this.keys.left&&(this.velocityX=-this.speed,this.lastDirection=-1),this.keys.right&&(this.velocityX=this.speed,this.lastDirection=1),this.isGrounded||(this.velocityY+=this.gravity),this.x+=this.velocityX,this.y+=this.velocityY,this.x<0&&(this.x=0),this.x+this.width>this.game.width&&(this.x=this.game.width-this.width),this.y<0&&(this.y=0,this.velocityY=0),this.y+this.height>this.game.height?(this.y=this.game.height-this.height,this.velocityY=0,this.isGrounded=!0):this.isGrounded=!1,this.isAttacking&&Date.now()-this.lastAttackTime>this.attackDuration&&(this.isAttacking=!1)}},{key:"jump",value:function(){this.isGrounded&&(this.velocityY=-this.jumpForce,this.isGrounded=!1,this.isJumping=!0)}},{key:"meleeAttack",value:function(){var t=this,e=Date.now();e-this.lastAttackTime>this.attackCooldown&&(this.isAttacking=!0,this.lastAttackTime=e,this.game.enemies.forEach((function(e){var i=e.x-t.x,a=e.y-t.y,s=Math.sqrt(i*i+a*a);s<t.attackRange&&e.takeDamage(t.attackDamage)})))}},{key:"rangedAttack",value:function(){var t=Date.now();if(t-this.lastShootTime>this.shootCooldown){this.lastShootTime=t;var e={x:this.x+this.width/2,y:this.y+this.height/2,velocityX:this.projectileSpeed*this.lastDirection,damage:this.projectileDamage};this.game.projectiles.push(e)}}},{key:"draw",value:function(t){t.fillStyle=this.color,t.fillRect(this.x,this.y,this.width,this.height),this.isAttacking&&(t.strokeStyle="#FF0000",t.beginPath(),t.arc(this.x+this.width/2,this.y+this.height/2,this.attackRange,0,2*Math.PI),t.stroke());var e=40,i=5,a=this.health/100;t.fillStyle="#FF0000",t.fillRect(this.x-(e-this.width)/2,this.y-10,e,i),t.fillStyle="#00FF00",t.fillRect(this.x-(e-this.width)/2,this.y-10,e*a,i)}},{key:"takeDamage",value:function(t){this.health=Math.max(0,this.health-t),this.health<=0&&(this.game.gameState.gameOver=!0)}}])}()),c=(i(6031),function(){function t(e,i,a){(0,r.A)(this,t),this.x=e,this.y=i,this.game=a,this.width=32,this.height=32,this.speed=2,this.health=100,this.damage=10,this.attackRange=50,this.detectionRange=200,this.direction=1,this.movementTimer=0,this.movementInterval=2e3,this.frameX=0,this.frameY=0,this.maxFrame=3,this.frameTimer=0,this.frameInterval=100,this.isAttacking=!1,this.isDead=!1}return(0,o.A)(t,[{key:"update",value:function(t){if(!this.isDead){this.frameTimer+=t,this.frameTimer>=this.frameInterval&&(this.frameTimer=0,this.frameX=(this.frameX+1)%this.maxFrame);var e=this.game.player;if(e){var i=Math.sqrt(Math.pow(e.x-this.x,2)+Math.pow(e.y-this.y,2));if(i<=this.detectionRange){var a=e.x-this.x,s=e.y-this.y,h=Math.atan2(s,a);this.x+=Math.cos(h)*this.speed,this.y+=Math.sin(h)*this.speed,this.direction=a>0?1:-1,i<=this.attackRange&&this.attack(e)}else this.patrol(t)}}}},{key:"patrol",value:function(t){this.movementTimer+=t,this.movementTimer>=this.movementInterval&&(this.direction*=-1,this.movementTimer=0),this.x+=this.speed*this.direction}},{key:"attack",value:function(t){var e=this;this.isAttacking||(this.isAttacking=!0,t.takeDamage(this.damage),setTimeout((function(){e.isAttacking=!1}),1e3))}},{key:"takeDamage",value:function(t){this.health-=t,this.health<=0&&this.die()}},{key:"die",value:function(){this.isDead=!0}},{key:"draw",value:function(t){if(!this.isDead){t.save(),t.fillStyle="red",t.fillRect(this.x,this.y,this.width,this.height);var e=32,i=5,a=this.health/100;t.fillStyle="black",t.fillRect(this.x,this.y-10,e,i),t.fillStyle="red",t.fillRect(this.x,this.y-10,e*a,i),t.restore()}}}])}()),u=(i(3771),i(2062),i(2712),i(1454),i(8872),function(){function t(e,i){(0,r.A)(this,t),this.canvas=e,this.ctx=e.getContext("2d"),this.store=i,this.width=e.width,this.height=e.height,this.running=!1,this.lastTime=0,this.gameState={score:0,level:1,gameOver:!1,paused:!1},this.init()}return(0,o.A)(t,[{key:"init",value:function(){this.player=new l(this.width/2,this.height-100,this),this.enemies=[],this.projectiles=[],this.maxEnemies=5,this.enemySpawnTimer=0,this.enemySpawnInterval=5e3,this.lastEnemySpawnTime=0,this.setupEventListeners()}},{key:"setupEventListeners",value:function(){var t=this;window.addEventListener("keydown",(function(e){t.player&&t.player.handleKeyDown(e),"p"===e.key&&(t.gameState.paused=!t.gameState.paused),"r"===e.key&&t.gameState.gameOver&&t.restart()})),window.addEventListener("keyup",(function(e){t.player&&t.player.handleKeyUp(e)}))}},{key:"start",value:function(){this.running||(this.running=!0,this.lastTime=performance.now(),this.gameLoop())}},{key:"stop",value:function(){this.running=!1,this.cleanup()}},{key:"cleanup",value:function(){window.removeEventListener("keydown",this.handleKeyDown),window.removeEventListener("keyup",this.handleKeyUp)}},{key:"restart",value:function(){this.gameState={score:0,level:1,gameOver:!1,paused:!1},this.init()}},{key:"gameLoop",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:performance.now();if(this.running){var i=e-this.lastTime;this.lastTime=e,this.gameState.paused||this.gameState.gameOver||(this.update(i),this.draw()),requestAnimationFrame((function(e){return t.gameLoop(e)}))}}},{key:"update",value:function(t){var e=this;this.player&&this.player.update(t),this.enemies.forEach((function(i,a){i.update(t),i.health<=0&&(e.enemies.splice(a,1),e.gameState.score+=100)})),this.spawnEnemies(t),this.projectiles.forEach((function(i,a){i.update(t),i.shouldRemove&&e.projectiles.splice(a,1)})),this.checkCollisions()}},{key:"draw",value:function(){var t=this;this.ctx.clearRect(0,0,this.width,this.height),this.player&&this.player.draw(this.ctx),this.enemies.forEach((function(e){return e.draw(t.ctx)})),this.projectiles.forEach((function(e){return e.draw(t.ctx)})),this.drawUI()}},{key:"drawUI",value:function(){this.ctx.fillStyle="white",this.ctx.font="20px Arial",this.ctx.fillText("Score: ".concat(this.gameState.score),10,30),this.ctx.fillText("Level: ".concat(this.gameState.level),10,60),this.gameState.paused&&(this.ctx.fillStyle="rgba(0, 0, 0, 0.5)",this.ctx.fillRect(0,0,this.width,this.height),this.ctx.fillStyle="white",this.ctx.font="48px Arial",this.ctx.fillText("PAUSED",this.width/2-80,this.height/2),this.ctx.font="24px Arial",this.ctx.fillText("Press P to Resume",this.width/2-80,this.height/2+40)),this.gameState.gameOver&&(this.ctx.fillStyle="rgba(0, 0, 0, 0.7)",this.ctx.fillRect(0,0,this.width,this.height),this.ctx.fillStyle="white",this.ctx.font="48px Arial",this.ctx.fillText("Game Over",this.width/2-100,this.height/2),this.ctx.font="24px Arial",this.ctx.fillText("Final Score: ".concat(this.gameState.score),this.width/2-80,this.height/2+40),this.ctx.fillText("Press R to Restart",this.width/2-80,this.height/2+80))}},{key:"spawnEnemies",value:function(t){if(this.enemySpawnTimer+=t,this.enemySpawnTimer>=this.enemySpawnInterval&&this.enemies.length<this.maxEnemies){var e=Math.random()*(this.width-64)+32,i=Math.random()*(this.height-64)+32;this.enemies.push(new c(e,i,this)),this.enemySpawnTimer=0}}},{key:"checkCollisions",value:function(){var t=this;this.enemies.forEach((function(e){t.player&&t.checkCollision(t.player,e)&&(t.player.takeDamage(10),t.player.health<=0&&(t.gameState.gameOver=!0))})),this.projectiles.forEach((function(e){t.enemies.forEach((function(i){t.checkCollision(e,i)&&(i.takeDamage(e.damage),e.shouldRemove=!0)}))}))}},{key:"checkCollision",value:function(t,e){return t.x<e.x+e.width&&t.x+t.width>e.x&&t.y<e.y+e.height&&t.y+t.height>e.y}}])}()),v=["width","height"];const f={__name:"GameCanvas",setup:function(t){var e=(0,h.KR)(800),i=(0,h.KR)(600),a=(0,n.Pj)(),r=null;return(0,s.sV)((function(){var t=document.getElementById("gameCanvas"),e=t.getContext("2d");r=new u(t,e,a),r.init(),r.start()})),(0,s.hi)((function(){r&&r.stop()})),function(t,a){return(0,s.uX)(),(0,s.CE)("canvas",{id:"gameCanvas",width:e.value,height:i.value},null,8,v)}}};var d=i(1241);const m=(0,d.A)(f,[["__scopeId","data-v-1dfbc616"]]),y=m;var g=i(4232),p={class:"snake-game"},k={class:"game-header"},w={class:"score-container"},x={class:"score"},S={class:"value"},T={class:"high-score"},E={class:"value"},A=["width","height"],b={key:0,class:"game-over"},L={class:"game-over-content"},R={class:"final-score"},C={class:"value"};function P(t,e,i,a,h,n){return(0,s.uX)(),(0,s.CE)("div",p,[(0,s.Lk)("div",k,[(0,s.Lk)("div",w,[(0,s.Lk)("div",x,[e[1]||(e[1]=(0,s.Lk)("span",{class:"label"},"分数",-1)),(0,s.Lk)("span",S,(0,g.v_)(a.score),1)]),(0,s.Lk)("div",T,[e[2]||(e[2]=(0,s.Lk)("span",{class:"label"},"最高分",-1)),(0,s.Lk)("span",E,(0,g.v_)(a.highScore),1)])]),e[3]||(e[3]=(0,s.Fv)('<div class="controls-info" data-v-12e86f5c><div class="key" data-v-12e86f5c>↑</div><div class="key-row" data-v-12e86f5c><div class="key" data-v-12e86f5c>←</div><div class="key" data-v-12e86f5c>↓</div><div class="key" data-v-12e86f5c>→</div></div><div class="key-label" data-v-12e86f5c>方向键控制</div></div>',1))]),(0,s.Lk)("canvas",{ref:"gameCanvas",width:a.canvasWidth,height:a.canvasHeight},null,8,A),a.gameOver?((0,s.uX)(),(0,s.CE)("div",b,[(0,s.Lk)("div",L,[e[6]||(e[6]=(0,s.Lk)("h2",null,"游戏结束",-1)),(0,s.Lk)("div",R,[e[4]||(e[4]=(0,s.Lk)("span",{class:"label"},"最终得分",-1)),(0,s.Lk)("span",C,(0,g.v_)(a.score),1)]),(0,s.Lk)("button",{onClick:e[0]||(e[0]=function(){return a.restartGame&&a.restartGame.apply(a,arguments)}),class:"restart-btn"},e[5]||(e[5]=[(0,s.Lk)("span",{class:"btn-text"},"重新开始",-1),(0,s.Lk)("span",{class:"btn-icon"},"↺",-1)]))])])):(0,s.Q3)("",!0)])}var D=i(8653);i(6918),i(8706),i(2008),i(5086),i(3609),i(3288),i(8781),i(8156),i(4520),i(7550);const M={name:"SnakeGame",setup:function(){var t,e,i,a=(0,h.KR)(null),n=600,r=400,o=20,l=(0,h.KR)(0),c=(0,h.KR)(localStorage.getItem("snakeHighScore")||0),u=(0,h.KR)(!1),v=(0,h.KR)([]),f=(0,h.KR)(!1),d=[],m={},y="right",g="right",p=function(){d=[{x:6,y:10},{x:5,y:10},{x:4,y:10}],k(),l.value=0,u.value=!1,y="right",g="right",v.value=[],f.value=!0,e&&clearInterval(e),i&&clearInterval(i),e=setInterval(T,100),i=setInterval(S,16)},k=function(){var t,e=Math.floor(n/o)-1,i=Math.floor(r/o)-1;do{t={x:Math.floor(Math.random()*e),y:Math.floor(Math.random()*i)}}while(d.some((function(e){return e.x===t.x&&e.y===t.y})));m=t,w(m.x*o+o/2,m.y*o+o/2)},w=function(t,e){for(var i=0;i<10;i++){var a=2*Math.PI/10*i;v.value.push({x:t,y:e,vx:2*Math.cos(a),vy:2*Math.sin(a),life:1,color:"#e74c3c",size:3})}},x=function(t,e){for(var i=0;i<5;i++)v.value.push({x:t+Math.random()*o,y:e+Math.random()*o,vx:2*(Math.random()-.5),vy:2*(Math.random()-.5),life:.8,color:"#4cd137",size:2})},S=function(){v.value=v.value.filter((function(t){return t.x+=t.vx,t.y+=t.vy,t.life-=.02,t.size-=.05,t.life>0&&t.size>0}))},T=function(){if(!u.value){y=g;var t=(0,D.A)({},d[0]);switch(y){case"up":t.y--;break;case"down":t.y++;break;case"left":t.x--;break;case"right":t.x++;break}L(t)?C():(d.unshift(t),x(t.x*o,t.y*o),t.x===m.x&&t.y===m.y?(l.value+=10,l.value>c.value&&(c.value=l.value,localStorage.setItem("snakeHighScore",c.value)),k()):d.pop(),E())}},E=function(){if(t){t.fillStyle="#1a1a1a",t.fillRect(0,0,n,r),A(),v.value.forEach((function(e){t.fillStyle="".concat(e.color).concat(Math.floor(255*e.life).toString(16).padStart(2,"0")),t.beginPath(),t.arc(e.x,e.y,e.size,0,2*Math.PI),t.fill()})),d.forEach((function(e,i){var a=e.x*o,s=e.y*o;t.fillStyle=0===i?"#4cd137":"#20bf6b",t.shadowColor="#4cd137",t.shadowBlur=10,b(t,a,s,o-1,o-1,4),t.fill(),t.shadowBlur=0}));var e=m.x*o+o/2,i=m.y*o+o/2,a=2*Math.sin(Date.now()/200);t.fillStyle="#e74c3c",t.shadowColor="#e74c3c",t.shadowBlur=15,t.beginPath(),t.arc(e,i,o/3,0,2*Math.PI),t.fill(),t.globalAlpha=.3,t.beginPath(),t.arc(e,i,o/3+a,0,2*Math.PI),t.fill(),t.globalAlpha=1,t.shadowBlur=0}},A=function(){t.strokeStyle="#2c3e50",t.lineWidth=.5;for(var e=0;e<=n;e+=o)t.beginPath(),t.moveTo(e,0),t.lineTo(e,r),t.stroke();for(var i=0;i<=r;i+=o)t.beginPath(),t.moveTo(0,i),t.lineTo(n,i),t.stroke()},b=function(t,e,i,a,s,h){t.beginPath(),t.moveTo(e+h,i),t.lineTo(e+a-h,i),t.quadraticCurveTo(e+a,i,e+a,i+h),t.lineTo(e+a,i+s-h),t.quadraticCurveTo(e+a,i+s,e+a-h,i+s),t.lineTo(e+h,i+s),t.quadraticCurveTo(e,i+s,e,i+s-h),t.lineTo(e,i+h),t.quadraticCurveTo(e,i,e+h,i),t.closePath()},L=function(t){return t.x<0||t.x>=n/o||t.y<0||t.y>=r/o||d.some((function(e){return e.x===t.x&&e.y===t.y}))},R=function(t){if(f.value)switch(t.key){case"ArrowUp":"down"!==y&&(g="up");break;case"ArrowDown":"up"!==y&&(g="down");break;case"ArrowLeft":"right"!==y&&(g="left");break;case"ArrowRight":"left"!==y&&(g="right");break}else p()},C=function(){u.value=!0,f.value=!1,clearInterval(e),clearInterval(i);for(var t=0;t<30;t++){var a=Math.random()*Math.PI*2,s=4*Math.random()+2;v.value.push({x:d[0].x*o+o/2,y:d[0].y*o+o/2,vx:Math.cos(a)*s,vy:Math.sin(a)*s,life:1,color:"#e74c3c",size:4*Math.random()+2})}},P=function(){p()};return(0,s.sV)((function(){t=a.value.getContext("2d"),window.addEventListener("keydown",R),E()})),(0,s.hi)((function(){window.removeEventListener("keydown",R),clearInterval(e),clearInterval(i)})),{gameCanvas:a,canvasWidth:n,canvasHeight:r,score:l,highScore:c,gameOver:u,gameStarted:f,restartGame:P}}},I=(0,d.A)(M,[["render",P],["__scopeId","data-v-12e86f5c"]]),O=I;var _={class:"app"},j={key:0,class:"game-menu"},U={class:"menu-buttons"};const K={__name:"App",setup:function(t){var e=(0,h.KR)(!1),i=(0,h.KR)(0),a=function(t){i.value=t,e.value=!0};return function(t,h){return(0,s.uX)(),(0,s.CE)("div",_,[e.value?1===i.value?((0,s.uX)(),(0,s.Wv)(y,{key:1})):2===i.value?((0,s.uX)(),(0,s.Wv)(O,{key:2})):(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("div",j,[h[2]||(h[2]=(0,s.Lk)("h1",null,"游戏选择",-1)),(0,s.Lk)("div",U,[(0,s.Lk)("button",{onClick:h[0]||(h[0]=function(t){return a(1)})},"冒险游戏"),(0,s.Lk)("button",{onClick:h[1]||(h[1]=function(t){return a(2)})},"贪吃蛇")])]))])}}},X=K,F=X,G=(0,n.y$)({state:{gameState:{player:{health:100,position:{x:0,y:0},inventory:[]},enemies:[],projectiles:[],score:0}},getters:{playerHealth:function(t){return t.gameState.player.health},playerPosition:function(t){return t.gameState.player.position},enemies:function(t){return t.gameState.enemies},projectiles:function(t){return t.gameState.projectiles},score:function(t){return t.gameState.score}},mutations:{UPDATE_PLAYER_HEALTH:function(t,e){t.gameState.player.health=e},UPDATE_PLAYER_POSITION:function(t,e){t.gameState.player.position=e},UPDATE_ENEMIES:function(t,e){t.gameState.enemies=e},UPDATE_PROJECTILES:function(t,e){t.gameState.projectiles=e},UPDATE_SCORE:function(t,e){t.gameState.score=e}},actions:{updateGameState:function(t,e){var i=t.commit;i("UPDATE_PLAYER_HEALTH",e.player.health),i("UPDATE_PLAYER_POSITION",e.player.position),i("UPDATE_ENEMIES",e.enemies),i("UPDATE_PROJECTILES",e.projectiles),i("UPDATE_SCORE",e.score)}}});(0,a.Ef)(F).use(G).mount("#app")}},e={};function i(a){var s=e[a];if(void 0!==s)return s.exports;var h=e[a]={exports:{}};return t[a].call(h.exports,h,h.exports,i),h.exports}i.m=t,(()=>{var t=[];i.O=(e,a,s,h)=>{if(!a){var n=1/0;for(c=0;c<t.length;c++){for(var[a,s,h]=t[c],r=!0,o=0;o<a.length;o++)(!1&h||n>=h)&&Object.keys(i.O).every((t=>i.O[t](a[o])))?a.splice(o--,1):(r=!1,h<n&&(n=h));if(r){t.splice(c--,1);var l=s();void 0!==l&&(e=l)}}return e}h=h||0;for(var c=t.length;c>0&&t[c-1][2]>h;c--)t[c]=t[c-1];t[c]=[a,s,h]}})(),(()=>{i.n=t=>{var e=t&&t.__esModule?()=>t["default"]:()=>t;return i.d(e,{a:e}),e}})(),(()=>{i.d=(t,e)=>{for(var a in e)i.o(e,a)&&!i.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})}})(),(()=>{i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()})(),(()=>{i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e)})(),(()=>{var t={524:0};i.O.j=e=>0===t[e];var e=(e,a)=>{var s,h,[n,r,o]=a,l=0;if(n.some((e=>0!==t[e]))){for(s in r)i.o(r,s)&&(i.m[s]=r[s]);if(o)var c=o(i)}for(e&&e(a);l<n.length;l++)h=n[l],i.o(t,h)&&t[h]&&t[h][0](),t[h]=0;return i.O(c)},a=self["webpackChunkpixel_adventure"]=self["webpackChunkpixel_adventure"]||[];a.forEach(e.bind(null,0)),a.push=e.bind(null,a.push.bind(a))})();var a=i.O(void 0,[504],(()=>i(6578)));a=i.O(a)})();
//# sourceMappingURL=app.dcb14efb.js.map